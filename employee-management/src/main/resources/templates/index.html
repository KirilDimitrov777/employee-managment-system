<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Employee Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body { background: linear-gradient(to right, #66ff99, #c3cfe7); font-family: "Segoe UI", sans-serif; }
        .navbar { background-color: #72d67e; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
        .navbar-brand { font-weight: 600; color: white !important; font-size: 1.3rem; }
        .btn-custom { background-color: #388e3c; color: white; border-radius: 10px; transition: 0.3s; font-weight: 500; }
        .btn-custom:hover { background-color: #2e7d32; transform: scale(1.05); }
        .card { border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); background-color: white; }
        thead { background-color: #43a047; color: white; }
        h2 { color: #2e7d32; font-weight: bold; }
        .footer { margin-top: 40px; text-align: center; color: #555; }
        .action-buttons { text-align: center; margin: 25px 0; }
        .action-buttons .btn { margin: 0 10px; min-width: 180px; }
        .search-bar { margin-bottom: 20px; display: flex; justify-content: center; gap: 10px; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">üíº EMS</a>
    </div>
</nav>

<div class="container mt-4">
    <h2 class="text-center mb-4">Employee Management System</h2>

    <!-- Search Bar -->
    <form th:action="@{/search}" method="get" class="search-bar">
        <input type="text" name="keyword" th:value="${searchKeyword}" class="form-control w-50" placeholder="Search by name or role..." required>
        <button type="submit" class="btn btn-custom">Search</button>
        <a href="/" class="btn btn-secondary">Clear</a>
    </form>

    <!-- Error Message -->
    <div th:if="${errorMessage}" class="alert alert-danger text-center" th:text="${errorMessage}"></div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="btn btn-custom" data-bs-toggle="modal" data-bs-target="#addModal">+ Add Employee</button>
        <button class="btn btn-custom" data-bs-toggle="modal" data-bs-target="#updateModal">‚úèÔ∏è Update Employee</button>
        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">üóë Delete Employee</button>
        <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#deleteAllModal">‚ö†Ô∏è Delete All</button>
    </div>

    <!-- Employee Table -->
    <div class="card p-4">
        <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle text-center">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Gender</th>
                    <th>Salary</th>
                    <th>Role</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="emp, stat : ${employees}">
                    <td th:text="${emp.id}"></td>
                    <td th:text="${emp.employeeName}"></td>
                    <td th:text="${emp.employeeEmail}"></td>
                    <td th:text="${emp.employeePhone}"></td>
                    <td th:text="${emp.employeeGender}"></td>
                    <td th:text="${emp.employeeSalary}"></td>
                    <td th:text="${emp.employeeRole}"></td>
                </tr>
                <tr th:if="${employees.size() == 0}">
                    <td colspan="8" class="text-center text-muted">No employees found.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add Employee Modal -->
<div class="modal fade" id="addModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">Add Employee</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/create}" th:object="${employee}" method="post">
                    <div class="mb-3">
                        <label>Name</label>
                        <input type="text" th:field="*{employeeName}" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label>Email</label>
                        <input type="email" th:field="*{employeeEmail}" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label>Phone</label>
                        <input type="text" th:field="*{employeePhone}" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label>Gender</label>
                        <select th:field="*{employeeGender}" class="form-select" required>
                            <option value="">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Salary</label>
                        <input type="text" th:field="*{employeeSalary}" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label>Role</label>
                        <input type="text" th:field="*{employeeRole}" class="form-control" required>
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-success">Add Employee</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Update Employee Modal -->
<div class="modal fade" id="updateModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Update Employee</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/update}" th:object="${employee}" method="post">
                    <div class="mb-3">
                        <label>ID (Existing Employee ID)</label>
                        <input type="text" th:field="*{id}" class="form-control" placeholder="e.g. EMP1" required>
                    </div>
                    <div class="mb-3">
                        <label>Name</label>
                        <input type="text" th:field="*{employeeName}" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Email</label>
                        <input type="email" th:field="*{employeeEmail}" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Phone</label>
                        <input type="number" th:field="*{employeePhone}" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Gender</label>
                        <select th:field="*{employeeGender}" class="form-select">
                            <option value="">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Salary</label>
                        <input type="text" th:field="*{employeeSalary}" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Role</label>
                        <input type="text" th:field="*{employeeRole}" class="form-control">
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary">Update Employee</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Delete Employee Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Delete Employee</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/remove}" method="post">
                    <div class="mb-3">
                        <label>Enter Employee ID to Delete</label>
                        <input type="text" name="id" class="form-control" placeholder="e.g. EMP1" required>
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Delete All Employees Modal -->
<div class="modal fade" id="deleteAllModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-warning">
                <h5 class="modal-title">Delete All Employees</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/remove/all}" th:object="${confirmationForm}" method="post">
                    <p class="text-danger">Type <strong>Yes</strong> to confirm deletion of all records.</p>
                    <input type="text" th:field="*{confirmation}" class="form-control mb-3" required>
                    <div class="text-end">
                        <button type="submit" class="btn btn-warning">Delete All</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
    <p>¬© 2025 Employee Management System</p>
</footer>

</body>
</html>
